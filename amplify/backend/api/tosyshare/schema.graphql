type Connection @model
  @key(name: "ByCode", fields: ["code"], queryField: "GetConnectionsByCode") {
  id: ID!
  code: Int!
  connectors: [Connector] @connection(name: "ConnectionConnectors")
}

type Connector @model {
  id: ID!
  identityId: String!
  connection: Connection @connection(name: "ConnectionConnectors")
}

enum MessageType {
  STRING
  FILE
}

type Message @model {
  id: ID!
  type: MessageType!
  value: String!
  connection: Connection! @connection
  connector: Connector! @connection
  messageConnectionId: ID!
}

type Subscription {
  onMessageByConnectionId(messageConnectionId: ID!): Message
    @aws_subscribe(mutations: ["createMessage"])
}